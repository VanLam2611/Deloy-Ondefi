(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9700],{51780:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/voting/proposal/[id]",function(){return r(43250)}])},72002:function(e,n,r){"use strict";r.d(n,{Z:function(){return f}});var t=r(85893),o=(r(67294),r(9269));function i(){var e,n,r=(e=["\n  display: flex;\n  z-index: 2;\n  top: -65%;\n  position: absolute;\n  transform: translate(-50%, -50%);\n  transition: left 200ms ease-out;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return i=function(){return r},r}var c=r(186).ZP.div(i()),s=r(17804);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var l=function(e){return(0,t.jsxs)(s.Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){a(e,n,r[n])}))}return e}({viewBox:"0 0 34 38"},e,{children:[(0,t.jsx)("rect",{x:"8.83594",width:"5.30132",height:"17.3191",rx:"2.65066",fill:"#D1884F"}),(0,t.jsx)("rect",{x:"19.4385",width:"5.30132",height:"17.3191",rx:"2.65066",fill:"#D1884F"}),(0,t.jsx)("path",{d:"M8.5 13.0084C13.1944 8.40751 20.8056 8.40751 25.5 13.0084C30.1944 17.6093 30.1944 25.0689 25.5 29.6698L17.6538 37.3597C17.2927 37.7136 16.7073 37.7136 16.3462 37.3597L8.5 29.6698C3.80558 25.0689 3.80558 17.6093 8.5 13.0084Z",fill:"#D1884F"}),(0,t.jsx)("ellipse",{cx:"12.3696",cy:"19.9172",rx:"1.76711",ry:"2.59786",fill:"white"}),(0,t.jsx)("ellipse",{cx:"21.2056",cy:"19.9172",rx:"1.76711",ry:"2.59786",fill:"white"})]}))},u=r(84103),d=function(e){return e<0?0:e>100?100:e},f=function(e){var n=e.variant,r=void 0===n?u.o.ROUND:n,i=e.scale,s=void 0===i?u.Q.MD:i,a=e.primaryStep,f=void 0===a?0:a,x=e.secondaryStep,p=void 0===x?null:x,h=e.showProgressBunny,j=void 0!==h&&h,v=e.useDark,m=void 0===v||v,b=e.children;return(0,t.jsx)(o.Z,{$useDark:m,variant:r,scale:s,children:b||(0,t.jsxs)(t.Fragment,{children:[j&&(0,t.jsx)(c,{style:{left:"".concat(d(f),"%")},children:(0,t.jsx)(l,{})}),(0,t.jsx)(o.$,{$useDark:m,primary:!0,style:{width:"".concat(d(f),"%")}}),p?(0,t.jsx)(o.$,{$useDark:m,style:{width:"".concat(d(p),"%")}}):null]})})}},9269:function(e,n,r){"use strict";r.d(n,{$:function(){return h},Z:function(){return j}});var t,o=r(186),i=r(57247),c=r(34357),s=r(84103);function a(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var l,u=(a(t={},s.o.ROUND,{borderRadius:"32px"}),a(t,s.o.FLAT,{borderRadius:0}),t),d=(a(l={},s.Q.MD,{height:"16px"}),a(l,s.Q.SM,{height:"8px"}),l);function f(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function x(){var e=f(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  background: ",";\n  height: 100%;\n  transition: width 200ms ease;\n"]);return x=function(){return e},e}function p(){var e=f(["\n  position: relative;\n  background-color: ",";\n  box-shadow: ",";\n  overflow: hidden;\n\n  "," {\n    border-top-left-radius: ",";\n    border-bottom-left-radius: ",";\n  }\n\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}var h=o.ZP.div(x(),(function(e){var n=e.theme,r=e.$useDark,t=e.primary,o=e.$background;return o||(r?t?n.colors.secondary:"".concat(n.colors.secondary,"80"):t?c.C0.secondary:"".concat(c.C0.secondary,"80"))}));h.defaultProps={primary:!1};var j=o.ZP.div(p(),(function(e){var n=e.theme;return e.$useDark?n.colors.input:c.C0.input}),(function(e){return e.theme.shadows.inset}),h,(function(e){return e.variant===s.o.FLAT?"0":"32px"}),(function(e){return e.variant===s.o.FLAT?"0":"32px"}),(0,i.bU)({variants:u}),(0,i.bU)({prop:"scale",variants:d}),i.Dh)},84103:function(e,n,r){"use strict";r.d(n,{o:function(){return t},Q:function(){return o}});var t={ROUND:"round",FLAT:"flat"},o={MD:"md",SM:"sm"}},59667:function(e,n,r){"use strict";var t=r(85893),o=(r(67294),r(17804));function i(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}n.Z=function(e){return(0,t.jsx)(o.Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){i(e,n,r[n])}))}return e}({viewBox:"0 0 24 24"},e,{children:(0,t.jsx)("path",{d:"M8.11997 14.7101L12 10.8301L15.88 14.7101C16.27 15.1001 16.9 15.1001 17.29 14.7101C17.68 14.3201 17.68 13.6901 17.29 13.3001L12.7 8.7101C12.31 8.3201 11.68 8.3201 11.29 8.7101L6.69997 13.3001C6.30997 13.6901 6.30997 14.3201 6.69997 14.7101C7.08997 15.0901 7.72997 15.1001 8.11997 14.7101Z"})}))}},36196:function(e,n,r){"use strict";var t=r(85893),o=r(186),i=r(68112),c=r(83559);function s(){var e,n,r=(e=["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return s=function(){return r},r}var a=(0,o.ZP)(c.Z)(s());n.Z=function(){return(0,t.jsx)(a,{children:(0,t.jsx)(i.Z,{})})}},43250:function(e,n,r){"use strict";r.r(n),r.d(n,{__N_SSG:function(){return rn},default:function(){return tn}});var t=r(85893),o=r(40821),i=r(11163),c=r(36196),s=r(34051),a=r.n(s),l=r(56934),u=r(99273),d=r(58018),f=r(87761),x=r(87388),p=r(83559),h=r(65992),j=r(77044),v=r(80154),m=r(45101),b=r(41664),Z=r(99150),g=r(55027),y=r(71249),w=r(72006),O=r(97971),P=r(20388),S=r(37121),k=r(73408),C=r(53503),D=r(61101),I=r(77005),L=r(5545),F=r(65333),z=r(186),B=r(42298),E=r(38328),A=r(53467),V=r(65398);function $(){var e,n,r=(e=["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 16px;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return $=function(){return r},r}var N=(0,z.ZP)(l.Z)($(),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.cardBorder})),G=function(e){var n=e.proposal,r=(0,Z.$G)().t,o=new Date(1e3*n.start),i=new Date(1e3*n.end);return(0,t.jsxs)(C.Z,{mb:"16px",children:[(0,t.jsx)(D.Z,{children:(0,t.jsx)(x.Z,{as:"h3",scale:"md",children:r("Details")})}),(0,t.jsxs)(I.Z,{children:[(0,t.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,t.jsx)(L.Z,{color:"textSubtle",children:r("Identifier")}),(0,t.jsx)(F.Z,{href:"".concat(V.Gs,"/").concat(n.id),ml:"8px",children:n.id.slice(0,8)})]}),(0,t.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,t.jsx)(L.Z,{color:"textSubtle",children:r("Creator")}),(0,t.jsx)(F.Z,{href:(0,E.s6)(n.author,"address"),ml:"8px",children:(0,A.Z)(n.author)})]}),(0,t.jsxs)(f.Z,{alignItems:"center",mb:"16px",children:[(0,t.jsx)(L.Z,{color:"textSubtle",children:r("Snapshot")}),(0,t.jsx)(F.Z,{href:(0,E.s6)(n.snapshot,"block"),ml:"8px",children:n.snapshot})]}),(0,t.jsxs)(N,{p:"16px",children:[(0,t.jsx)(S.U,{proposalState:n.state,mb:"8px"}),(0,t.jsxs)(f.Z,{alignItems:"center",children:[(0,t.jsx)(L.Z,{color:"textSubtle",fontSize:"14px",children:r("Start Date")}),(0,t.jsx)(L.Z,{ml:"8px",children:(0,B.default)(o,"yyyy-MM-dd HH:mm")})]}),(0,t.jsxs)(f.Z,{alignItems:"center",children:[(0,t.jsx)(L.Z,{color:"textSubtle",fontSize:"14px",children:r("End Date")}),(0,t.jsx)(L.Z,{ml:"8px",children:(0,B.default)(i,"yyyy-MM-dd HH:mm")})]})]})]})]})},M=r(81972),T=r(86096),_=r(72002),H=r(6741),U=r(65044);function R(){var e,n,r=(e=["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return R=function(){return r},r}var Q,J=(0,z.ZP)(L.Z)(R()),X=function(e){var n=e.choices,r=e.votes,o=e.votesLoadingStatus,i=(0,Z.$G)().t,c=(0,P.zn)(r),s=(0,j.Ge)().account,a=(0,P.Z$)(r);return(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(D.Z,{children:(0,t.jsx)(x.Z,{as:"h3",scale:"md",children:i("Current Results")})}),(0,t.jsxs)(I.Z,{children:[o===O.iF.Fetched&&n.map((function(e,n){var r=c[e]||[],o=(0,P.Z$)(r),u=0===a?0:o/a*100,d=r.some((function(e){return s&&e.voter.toLowerCase()===s.toLowerCase()}));return(0,t.jsxs)(l.Z,{mt:n>0?"24px":"0px",children:[(0,t.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,t.jsx)(J,{mb:"4px",title:e,children:e}),d&&(0,t.jsxs)(M.Z,{variant:"success",outline:!0,ml:"8px",children:[(0,t.jsx)(T.Z,{mr:"4px"})," ",i("Voted")]})]}),(0,t.jsx)(l.Z,{mb:"4px",children:(0,t.jsx)(_.Z,{primaryStep:u,scale:"sm"})}),(0,t.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(L.Z,{color:"textSubtle",children:i("%total% Votes",{total:(0,U.uf)(o,0,2)})}),(0,t.jsxs)(L.Z,{children:[u.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2}),"%"]})]})]},e)})),o===O.iF.Fetching&&n.map((function(e,n){return(0,t.jsxs)(l.Z,{mt:n>0?"24px":"0px",children:[(0,t.jsx)(f.Z,{alignItems:"center",mb:"8px",children:(0,t.jsx)(J,{mb:"4px",title:e,children:e})}),(0,t.jsx)(l.Z,{mb:"4px",children:(0,t.jsx)(H.Z,{height:"36px",mb:"4px"})})]},e)}))]})]})},q=r(67294),K=r(97561),Y=r(83482),W=r(789),ee=r(30621),ne=r(74602),re=r(81141),te=r(64011),oe=r(23917);!function(e){e.MAIN="main",e.DETAILS="details"}(Q||(Q={}));var ie=r(81709),ce=r(19782),se=r(12347),ae=r(70335),le=r(90767),ue=function(e){var n=e.vote,r=e.total,o=e.isPending,i=e.isLoading,c=e.isError,s=e.onConfirm,a=e.onViewDetails,l=e.onDismiss,d=(0,Z.$G)().t;return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(le.I,{children:[(0,t.jsx)(L.Z,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:d("Voting For")}),(0,t.jsx)(J,{bold:!0,fontSize:"20px",mb:"8px",title:n.label,children:n.label}),(0,t.jsx)(L.Z,{color:"secondary",mb:"8px",textTransform:"uppercase",fontSize:"12px",bold:!0,children:d("Your Voting Power")}),i&&!c?(0,t.jsx)(H.Z,{height:"64px",mb:"12px"}):c?(0,t.jsx)(ie.Z,{variant:"danger",mb:"12px",children:(0,t.jsx)(L.Z,{color:"text",children:d("Error occurred, please try again later")})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(le.k,{onClick:a,style:{cursor:"pointer"},children:[(0,t.jsx)(L.Z,{bold:!0,fontSize:"20px",color:0===r?"failure":"text",children:(0,U.uf)(r,0,3)}),(0,t.jsx)(ce.Z,{scale:"sm",variant:"text",children:(0,t.jsx)(se.Z,{width:"24px"})})]}),0===r?(0,t.jsx)(ie.Z,{variant:"danger",mb:"12px",children:(0,t.jsx)(L.Z,{color:"danger",children:d("Hold some CAKE in your wallet or on PancakeSwap at the snapshot block to get voting power for future proposals.")})}):(0,t.jsx)(L.Z,{as:"p",color:"textSubtle",fontSize:"14px",children:d("Are you sure you want to vote for the above choice? This action cannot be undone.")})]})]}),(0,t.jsx)(u.Z,{isLoading:o,endIcon:o?(0,t.jsx)(ae.Z,{spin:!0,color:"currentColor"}):null,disabled:i||0===r,width:"100%",mb:"8px",onClick:s,children:d("Confirm Vote")}),(0,t.jsx)(u.Z,{variant:"secondary",width:"100%",onClick:l,children:d("Cancel")})]})},de=r(6365),fe=r(4411);function xe(e,n,r,t,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void r(l)}s.done?n(a):Promise.resolve(a).then(t,o)}function pe(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function he(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){pe(e,n,r[n])}))}return e}var je=function(e){var n,r=e.onSuccess,o=e.proposalId,i=e.vote,c=e.block,s=e.onDismiss,u=(0,q.useState)(Q.MAIN),d=u[0],f=u[1],x=(0,q.useState)(!0),p=x[0],h=x[1],v=(0,q.useState)(!1),b=v[0],g=v[1],y=(0,j.Ge)().account,w=(0,Z.$G)().t,O=(0,W.Z)().toastError,S=(0,te.Z)(),k=S.library,C=S.connector,D=(0,oe.Z)().theme,I=(0,fe.Z)(c,p),L=I.isLoading,F=I.isError,z=I.total,B=I.cakeBalance,E=I.cakeVaultBalance,A=I.cakePoolBalance,V=I.poolsBalance,$=I.cakeBnbLpBalance,N=I.ifoPoolBalance,G=d===Q.MAIN,M=G?null:function(){return f(Q.MAIN)},T=(pe(n={},Q.MAIN,w("Confirm Vote")),pe(n,Q.DETAILS,w("Voting Power")),n),_=function(){h(!1),s()},H=function(){var e,n=(e=a().mark((function e(){var n,t,c,s,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),n=JSON.stringify(he({},(0,P.GB)(),{type:m.Nl.VOTE,payload:{proposal:o,choice:i.value}})),e.next=5,(0,re.l)(C,k,y,n);case 5:return t=e.sent,c={address:y,msg:n,sig:t},e.next=9,(0,P.Jl)(c);case 9:return e.next=11,r();case 11:_(),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),O(w("Error"),null!==(l=null===(s=e.t0)||void 0===s?void 0:s.message)&&void 0!==l?l:w("Error occurred, please try again")),console.error(e.t0);case 20:return e.prev=20,g(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[0,14,20,23]])})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function c(e){xe(i,t,o,c,s,"next",e)}function s(e){xe(i,t,o,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}();return(0,t.jsx)(ne.Z,{title:T[d],onBack:M,onDismiss:s,hideCloseButton:!G,headerBackground:D.colors.gradients.cardHeader,children:(0,t.jsxs)(l.Z,{mb:"24px",width:"320px",children:[d===Q.MAIN&&(0,t.jsx)(ue,{vote:i,isError:F,isLoading:L,isPending:b,total:z,onConfirm:H,onViewDetails:function(){return f(Q.DETAILS)},onDismiss:_}),d===Q.DETAILS&&(0,t.jsx)(de.Z,{total:z,cakeBalance:B,ifoPoolBalance:N,cakeVaultBalance:E,cakePoolBalance:A,poolsBalance:V,cakeBnbLpBalance:$,block:c})]})})};function ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function me(e,n,r,t,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void r(l)}s.done?n(a):Promise.resolve(a).then(t,o)}function be(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function Ze(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ge(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var t,o,i=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(t=r.next()).done)&&(i.push(t.value),!n||i.length!==n);c=!0);}catch(a){s=!0,o=a}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return i}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ve(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function we(){var e=ye(["\n  align-items: center;\n  border: 1px solid ",";\n  border-radius: 16px;\n  cursor: ",";\n  display: flex;\n  margin-bottom: 16px;\n  padding: 16px;\n"]);return we=function(){return e},e}function Oe(){var e=ye(["\n  flex: 1;\n  padding-left: 16px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: 0;\n"]);return Oe=function(){return e},e}var Pe=z.ZP.label(we(),(function(e){var n=e.theme,r=e.isChecked;return n.colors[r?"success":"cardBorder"]}),(function(e){return e.isDisabled?"not-allowed":"pointer"})),Se=z.ZP.div(Oe()),ke=function(e){var n=e.proposal,r=e.onSuccess,o=Ze(e,["proposal","onSuccess"]),i=(0,q.useState)(null),c=i[0],s=i[1],l=(0,Z.$G)().t,d=(0,W.Z)().toastSuccess,f=(0,j.Ge)().account,p=function(){var e,n=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(l("Vote cast!")),r&&r();case 2:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function c(e){me(i,t,o,c,s,"next",e)}function s(e){me(i,t,o,c,s,"throw",e)}c(void 0)}))});return function(){return n.apply(this,arguments)}}(),h=ge((0,K.Z)((0,t.jsx)(je,{onSuccess:p,proposalId:n.id,vote:c,block:Number(n.snapshot)})),1)[0];return(0,t.jsxs)(C.Z,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){be(e,n,r[n])}))}return e}({},o,{children:[(0,t.jsx)(D.Z,{children:(0,t.jsx)(x.Z,{as:"h3",scale:"md",children:l("Cast your vote")})}),(0,t.jsxs)(I.Z,{children:[n.choices.map((function(e,n){var r=n+1===(null===c||void 0===c?void 0:c.value);return(0,t.jsxs)(Pe,{isChecked:r,isDisabled:!f,children:[(0,t.jsx)("div",{style:{flexShrink:0},children:(0,t.jsx)(Y.Z,{scale:"sm",value:e,checked:r,onChange:function(){s({label:e,value:n+1})},disabled:!f})}),(0,t.jsx)(Se,{children:(0,t.jsx)(L.Z,{as:"span",title:e,children:e})})]},e)})),f?(0,t.jsx)(u.Z,{onClick:h,disabled:null===c,children:l("Cast Vote")}):(0,t.jsx)(ee.Z,{})]})]}))},Ce=r(59667),De=r(96913),Ie=r(75472),Le=r.n(Ie),Fe=r(98913),ze=r.n(Fe);function Be(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Ee(){var e=Be(["\n  border-bottom: 1px solid ",";\n  padding: 16px 24px;\n"]);return Ee=function(){return e},e}function Ae(){var e=Be(["\n  flex: 1;\n"]);return Ae=function(){return e},e}var Ve=(0,z.ZP)(f.Z)(Ee(),(function(e){return e.theme.colors.cardBorder})),$e=(0,z.ZP)(H.Z)(Ae()),Ne=function(){return(0,t.jsx)(l.Z,{children:ze()(10).map((function(e){return(0,t.jsxs)(Ve,{children:[(0,t.jsx)(H.Z,{height:"21px",mr:"32px",width:"100px"}),(0,t.jsx)($e,{height:"21px",mr:"32px",width:"100%"}),(0,t.jsx)($e,{height:"21px",width:"100%"})]},e)}))})},Ge=r(20522);function Me(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function Te(){var e=Me(["\n  grid-area: address;\n"]);return Te=function(){return e},e}function _e(){var e=Me(["\n  grid-area: choice;\n  overflow: hidden;\n"]);return _e=function(){return e},e}function He(){var e=Me(["\n  justify-self: end;\n  grid-area: vote;\n"]);return He=function(){return e},e}function Ue(){var e=Me(["\n  border-bottom: 1px solid ",";\n  grid-gap: 8px;\n  grid-template-areas:\n    'address address address'\n    'choice choice vote';\n  grid-template-columns: 1fr 1fr 120px;\n  padding: 8px 16px;\n\n  "," {\n    grid-gap: 16px;\n    grid-template-areas: 'address choice vote';\n    padding: 16px 24px;\n  }\n"]);return Ue=function(){return e},e}var Re=(0,z.ZP)(l.Z).attrs({alignItems:"center"})(Te()),Qe=(0,z.ZP)(l.Z)(_e()),Je=(0,z.ZP)(l.Z)(He()),Xe=(0,z.ZP)(Ge.Z)(Ue(),(function(e){return e.theme.colors.cardBorder}),(function(e){return e.theme.mediaQueries.sm})),qe=function(e){var n,r=e.vote,o=e.isVoter,i=(0,Z.$G)().t,c=!!(null===(n=r.metadata)||void 0===n?void 0:n.votingPower),s=c?parseFloat(r.metadata.votingPower).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:3}):"--";return(0,t.jsxs)(Xe,{children:[(0,t.jsx)(Re,{children:(0,t.jsxs)(f.Z,{alignItems:"center",children:[(0,t.jsx)(F.Z,{href:(0,E.s6)(r.voter,"address"),children:(0,A.Z)(r.voter)}),o&&(0,t.jsxs)(M.Z,{variant:"success",outline:!0,ml:"8px",children:[(0,t.jsx)(T.Z,{mr:"4px"})," ",i("Voted")]})]})}),(0,t.jsx)(Qe,{children:(0,t.jsx)(J,{title:r.proposal.choices[r.choice-1],children:r.proposal.choices[r.choice-1]})}),(0,t.jsx)(Je,{children:(0,t.jsxs)(f.Z,{alignItems:"center",justifyContent:"end",children:[(0,t.jsx)(L.Z,{title:r.metadata.votingPower,children:s}),c&&(0,t.jsx)(F.Z,{href:"".concat(V.Gs,"/").concat(r.id)})]})})]})},Ke=function(e){var n,r=parseFloat(null===e||void 0===e||null===(n=e.metadata)||void 0===n?void 0:n.votingPower);return r||(r=0),r},Ye=function(e){var n=e.votes,r=e.votesLoadingStatus,o=e.totalVotes,i=(0,q.useState)(!1),c=i[0],s=i[1],a=(0,Z.$G)().t,l=(0,j.Ge)().account,d=Le()(n,[Ke,"created"],["desc","desc"]),p=c?d:d.slice(0,20),h=r===O.iF.Fetched;return(0,t.jsxs)(C.Z,{children:[(0,t.jsx)(D.Z,{children:(0,t.jsxs)(f.Z,{alignItems:"center",justifyContent:"space-between",children:[(0,t.jsx)(x.Z,{as:"h3",scale:"md",children:a("Votes (%count%)",{count:o?o.toLocaleString():"-"})}),!h&&(0,t.jsx)(ae.Z,{spin:!0,width:"22px"})]})}),!h&&(0,t.jsx)(Ne,{}),h&&p.length>0&&(0,t.jsxs)(t.Fragment,{children:[p.map((function(e){var n=l&&e.voter.toLowerCase()===l.toLowerCase();return(0,t.jsx)(qe,{vote:e,isVoter:n},e.id)})),(0,t.jsx)(f.Z,{alignItems:"center",justifyContent:"center",py:"8px",px:"24px",children:(0,t.jsx)(u.Z,{width:"100%",onClick:function(){s(!c)},variant:"text",endIcon:c?(0,t.jsx)(Ce.Z,{color:"primary",width:"21px"}):(0,t.jsx)(De.Z,{color:"primary",width:"21px"}),disabled:!h,children:a(c?"Hide":"See All")})})]}),h&&0===p.length&&(0,t.jsx)(f.Z,{alignItems:"center",justifyContent:"center",py:"32px",children:(0,t.jsx)(x.Z,{as:"h5",children:a("No votes found")})})]})};function We(e,n,r,t,o,i,c){try{var s=e[i](c),a=s.value}catch(l){return void r(l)}s.done?n(a):Promise.resolve(a).then(t,o)}var en=function(){var e,n,r=(0,i.useRouter)().query.id,c=(0,Z.$G)().t,s=(0,j.Ge)().account,C=(0,v.Z)(r?["proposal",r]:null,(function(){return(0,h.pU)(r)})),D=C.status,I=C.data,L=C.error,F=null!==I&&void 0!==I?I:{},z=F.id,B=void 0===z?null:z,E=F.snapshot,A=void 0===E?null:E,V=(0,o.ZP)(B&&A?["proposal",B,"votes"]:null,(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,h.uy)(B,Number(A)));case 1:case"end":return e.stop()}}),e)})),function(){var n=this,r=arguments;return new Promise((function(t,o){var i=e.apply(n,r);function c(e){We(i,t,o,c,s,"next",e)}function s(e){We(i,t,o,c,s,"throw",e)}c(void 0)}))})),$=V.status,N=V.data,M=V.mutate,T=s&&N&&N.some((function(e){return e.voter.toLowerCase()===s.toLowerCase()})),_=$===O.iF.Fetching||D===O.iF.Fetching;return!I&&L?(0,t.jsx)(w.Z,{}):(0,t.jsxs)(g.Z,{py:"40px",children:[(0,t.jsx)(p.V,{}),(0,t.jsx)(l.Z,{mb:"40px",children:(0,t.jsx)(b.default,{href:"/voting",passHref:!0,children:(0,t.jsx)(u.Z,{as:"a",variant:"text",startIcon:(0,t.jsx)(d.Z,{color:"primary",width:"24px"}),px:"0",children:c("Back to Vote Overview")})})}),(0,t.jsxs)(k.Z,{children:[(0,t.jsxs)(l.Z,{children:[(0,t.jsxs)(l.Z,{mb:"32px",children:[(0,t.jsxs)(f.Z,{alignItems:"center",mb:"8px",children:[(0,t.jsx)(S.U,{proposalState:I.state}),(0,t.jsx)(S.g,{isCoreProposal:(0,P.md)(I),ml:"8px"})]}),(0,t.jsx)(x.Z,{as:"h1",scale:"xl",mb:"16px",children:I.title}),(0,t.jsx)(l.Z,{children:(0,t.jsx)(y.Z,{children:I.body})})]}),!_&&!T&&I.state===m.r7.ACTIVE&&(0,t.jsx)(ke,{proposal:I,onSuccess:M,mb:"16px"}),(0,t.jsx)(Ye,{votes:N,totalVotes:null!==(n=null===N||void 0===N?void 0:N.length)&&void 0!==n?n:I.votes,votesLoadingStatus:$})]}),(0,t.jsxs)(l.Z,{position:"sticky",top:"40px",children:[(0,t.jsx)(G,{proposal:I}),(0,t.jsx)(X,{choices:I.choices,votes:N,votesLoadingStatus:$})]})]})]})},nn=function(){return(0,i.useRouter)().isFallback?(0,t.jsx)(c.Z,{}):(0,t.jsx)(en,{})},rn=!0,tn=function(e){var n=e.fallback,r=void 0===n?{}:n;return(0,t.jsx)(o.J$,{value:{fallback:r},children:(0,t.jsx)(nn,{})})}},72006:function(e,n,r){"use strict";var t=r(85893),o=r(186),i=r(52427),c=r(87388),s=r(5545),a=r(99273),l=r(83559),u=r(99150),d=r(41664);function f(){var e,n,r=(e=["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  height: calc(100vh - 64px);\n  justify-content: center;\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return f=function(){return r},r}var x=o.ZP.div(f());n.Z=function(){var e=(0,u.$G)().t;return(0,t.jsx)(l.Z,{children:(0,t.jsxs)(x,{children:[(0,t.jsx)(i.Z,{width:"64px",mb:"8px"}),(0,t.jsx)(c.Z,{scale:"xxl",children:"404"}),(0,t.jsx)(s.Z,{mb:"16px",children:e("Oops, page not found.")}),(0,t.jsx)(d.default,{href:"/",passHref:!0,children:(0,t.jsx)(a.Z,{as:"a",scale:"sm",children:e("Back Home")})})]})})}}},function(e){e.O(0,[2298,3440,5440,9986,4275,712,9774,2888,179],(function(){return n=51780,e(e.s=n);var n}));var n=e.O();_N_E=n}]);